아래는 기존 PRD에 **“결과 복사 / 파일 다운로드” 기능을 명확히 반영하여 업데이트한 PRD v1.1**입니다.
(기존 구조를 유지하면서 **출력·내보내기 영역을 강화**했습니다)

---

# PRD.md (v1.1)

## AI 기반 JSON 데이터 가공 · 재배치 웹 프로그램

---

## 1. 제품 개요 (Overview)

본 제품은 사용자가 업로드한 JSON 데이터를

* 필드 선택 및 재배치
* 띄어쓰기·엔터 규칙을 복수 조합
* AI 기반 포맷 추천

한 뒤, **결과를 즉시 복사하거나 파일로 다운로드**할 수 있는 웹 기반 데이터 가공 도구이다.

---

## 2. 입력 데이터 (변경 없음)

* JSON 파일 업로드
* JSON 직접 입력
* 배열(JSON Array) 기반 처리

---

## 3. 핵심 기능 (Core Features)

### 3.1 필드 선택 및 재배치

(기존 동일)

---

### 3.2 띄어쓰기 / 엔터 규칙 설정

(기존 동일, 복수 선택 유지)

---

## 4. 출력 및 내보내기 기능 (중요 업데이트)

### 4.1 출력 미리보기 영역

* 가공 결과를 **실시간 텍스트 미리보기**로 표시
* 실제 복사/다운로드 결과와 **100% 동일한 문자열** 보장
* 줄 번호 표시 옵션 (ON/OFF)

---

### 4.2 결과 복사 기능 (Clipboard)

#### 4.2.1 기본 동작

* `복사하기` 버튼 클릭 시:

  * 결과 텍스트 전체를 클립보드에 복사
  * 브라우저 기본 복사 API 사용

#### 4.2.2 UX 요구사항

* 복사 성공 시:

  * “클립보드에 복사되었습니다” 토스트 표시
* 복사 실패 시:

  * 수동 복사 안내 메시지 표시

---

### 4.3 파일 다운로드 기능 (Export)

#### 4.3.1 지원 파일 형식

* TXT (기본)
* JSON (가공 결과 기준)
* CSV (선택)

#### 4.3.2 다운로드 옵션

사용자는 다운로드 전 아래 옵션을 설정할 수 있다.

* 파일 형식 선택 (Radio / Select)
* 파일명 직접 입력
* 자동 파일명 규칙:

  ```
  json-format-result_YYYYMMDD_HHMM
  ```

---

### 4.3.3 파일 형식별 정의

#### TXT

* 순수 텍스트
* 띄어쓰기·엔터 규칙 그대로 반영

#### JSON

```json
{
  "result": "가거도  12 바 8\n가덕도  15 바 5"
}
```

또는 (옵션)

```json
[
  "가거도  12 바 8",
  "가덕도  15 바 5"
]
```

#### CSV

```csv
result
가거도  12 바 8
가덕도  15 바 5
```

---

### 4.4 복사 vs 다운로드 일관성 원칙

* **복사 결과 = 다운로드 결과**
* 포맷 차이는 파일 컨테이너만 다를 뿐,
  문자열 내용은 동일해야 한다.
* 줄 끝 엔터 포함 여부도 동일하게 적용

---

## 5. AI 연동 (보완)

AI는 단순 포맷 추천뿐 아니라 다음도 수행한다.

* “이 결과는 TXT 복사 사용이 적합합니다”
* “출판용이므로 CSV 다운로드를 추천합니다”
* 파일 형식 자동 추천 (선택 적용)

---

## 6. UX / UI 구성 (업데이트)

### 출력 영역 UI 구성

1. 결과 미리보기 (textarea / pre)
2. 버튼 영역

   * [복사하기]
   * [파일 다운로드]
3. 다운로드 옵션 패널

   * 파일 형식
   * 파일명
   * 엔터 포함 여부

---

## 7. 기술 요구사항 (업데이트)

### 7.1 프론트엔드

* Clipboard API 사용
* Blob + URL.createObjectURL 기반 파일 생성
* 서버 없이 클라이언트 단에서 다운로드 처리

### 7.2 서버 의존성

* **결과 복사 / 다운로드는 서버 불필요**
* AI 호출 시에만 서버/LLM 사용

---

## 8. 예외 처리

* 결과가 비어 있을 경우:

  * 복사 / 다운로드 버튼 비활성화
* JSON 파싱 오류 시:

  * 결과 생성 차단 + 오류 메시지
* 브라우저 Clipboard 제한:

  * 수동 복사 fallback 제공

---

## 9. 성공 기준 (업데이트)

* 복사 성공률
* 다운로드 완료율
* 외부 편집기(Word, HWP 등)에 붙여넣기 시 재수정 비율
* “바로 사용 가능” 사용자 피드백 비율

---
